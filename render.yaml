# render.yaml
# Configuraci√≥n de infraestructura para Render

services:
  # ========== BACKEND (Spring Boot) ==========
  - type: web
    name: llanogas-backend
    runtime: java
    env: java
    region: oregon
    plan: free
    
    # Build y Start
    buildCommand: ./mvnw clean package -DskipTests
    startCommand: java -jar target/seguimiento-reportes-0.0.1-SNAPSHOT.jar
    
    # Variables de entorno
    envVars:
      - key: JAVA_VERSION
        value: "17"
      
      - key: DATABASE_URL
        fromDatabase:
          name: llanogas-postgres
          property: connectionString
      
      - key: DB_URL
        fromDatabase:
          name: llanogas-postgres
          property: connectionString
      
      - key: DB_USER
        fromDatabase:
          name: llanogas-postgres
          property: user
      
      - key: DB_PASS
        fromDatabase:
          name: llanogas-postgres
          property: password
      
      - key: JWT_SECRET
        generateValue: true
      
      - key: FRONTEND_URL
        value: https://tu-proyecto.vercel.app
      
      - key: SMTP_HOST
        value: smtp.gmail.com
      
      - key: SMTP_PORT
        value: "587"
      
      - key: SMTP_USER
        sync: false
      
      - key: SMTP_PASS
        sync: false
      
      - key: NOTIF_EMAIL_ENABLED
        value: "false"
      
      - key: GOOGLE_MODE
        value: service
      
      - key: GOOGLE_CREDENTIALS_PATH
        sync: false
      
      - key: GOOGLE_FOLDER_ID
        sync: false

# ========== BASE DE DATOS (PostgreSQL) ==========
databases:
  - name: llanogas-postgres
    databaseName: seguimiento_reportes
    user: llanogas_user
    region: oregon
    plan: free
    ipAllowList: []